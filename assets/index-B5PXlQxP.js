import{u as L,r as i,q as M,m as p,c as O,a as e,p as t,y as o,d as g,f as n,t as a,o as u,w as f,v as _,z as S,b as I,k as U,l as E,g as D}from"./index-BZcIPdcA.js";import{u as z}from"./order-DhJ0DpvZ.js";const q={class:"w-full flex items-center flex-col overflow-y-auto"},A={class:"lg:w-4/5 w-[90%] w-full mt-10 flex flex-col items-center"},G=e("h1",{class:"px-2 text-3xl text-white font-bold text-center border-2 border-solid border-black rounded-lg bg-red-500"}," 訂單",-1),H={class:"flex mt-5"},J={class:"flex"},K=e("button",{class:"md:px-2 px-1 border-2 border-solid border-black text-center md:mx-3 mx-1 text-blue-800 bg-red-500 rounded-lg font-bold 2xl:text-2xl xl:text-xl lg:text-md sm:text-sm text-xs select-none active:bg-yellow-300"},"篩選訂單編號",-1),Q={class:"flex"},R=e("button",{class:"md:px-2 px-1 border-2 border-solid border-black text-center md:mx-3 mx-1 text-blue-800 bg-red-500 rounded-lg font-bold 2xl:text-2xl xl:text-xl lg:text-md sm:text-sm text-xs select-none active:bg-yellow-300"},"篩選訂單時間",-1),W={class:"flex"},Y=e("button",{class:"md:px-2 px-1 border-2 border-solid border-black text-center md:mx-3 mx-1 text-blue-800 bg-red-500 rounded-lg font-bold 2xl:text-2xl xl:text-xl lg:text-md sm:text-sm text-xs select-none active:bg-yellow-300"},"篩選服務人員",-1),Z={class:"flex"},ee=e("button",{class:"md:px-2 px-1 border-2 border-solid border-black text-center md:mx-3 mx-1 text-blue-800 bg-red-500 rounded-lg font-bold 2xl:text-2xl xl:text-xl lg:text-md sm:text-sm text-xs select-none active:bg-yellow-300"},"篩選訂單狀態",-1),te={class:"flex"},le=e("button",{class:"md:px-2 px-1 border-2 border-solid border-black text-center md:mx-3 mx-1 text-blue-800 bg-red-500 rounded-lg font-bold 2xl:text-2xl xl:text-xl lg:text-md sm:text-sm text-xs select-none active:bg-yellow-300"},"篩選付款方式",-1),oe={class:"lg:w-4/5 w-[90%] mt-10"},de={class:"flex w-full justify-center mb-2"},re={class:"text-blue-800 font-bold 2xl:text-lg sm:text-sm text-xs mx-2 flex bg-gray-300 rounded-lg px-1"},se={class:"text-red-500 font-bold 2xl:text-lg sm:text-sm text-xs mx-1"},ne={class:"text-blue-800 font-bold 2xl:text-lg sm:text-sm text-xs mx-2 flex bg-gray-300 rounded-lg px-1"},ae={class:"text-red-500 font-bold 2xl:text-lg sm:text-sm text-xs mx-1"},ce={class:"text-blue-800 font-bold 2xl:text-lg sm:text-sm text-xs mx-2 flex bg-gray-300 rounded-lg px-1"},xe={class:"text-red-500 font-bold 2xl:text-lg sm:text-sm text-xs mx-1"},ie={class:"text-blue-800 font-bold 2xl:text-lg sm:text-sm text-xs mx-2 flex bg-gray-300 rounded-lg px-1"},ue={class:"text-red-500 font-bold 2xl:text-lg sm:text-sm text-xs mx-1"},be={class:"text-blue-800 font-bold 2xl:text-lg sm:text-sm text-xs mx-2 flex bg-gray-300 rounded-lg px-1"},me={class:"text-red-500 font-bold 2xl:text-lg sm:text-sm text-xs mx-1"},pe={class:"text-blue-800 font-bold 2xl:text-lg sm:text-sm text-xs mx-2 flex bg-gray-300 rounded-lg px-1"},ge={class:"text-red-500 font-bold 2xl:text-lg sm:text-sm text-xs mx-1"},fe={key:0},_e=e("p",null,"目前無使用折扣",-1),he=[_e],ve={key:1,class:"w-full flex justify-center"},ye={class:"flex justify-end"},ke=["onClick"],we=["onClick"],Ce={class:"w-full flex justify-between mt-5"},De={class:"ml-5 text-xl text-blue-500 font-bold flex items-center"},Pe={class:"mx-2 text-red-600"},Oe={class:"mx-2 text-red-600"},Te={__name:"index",setup(Se){const x=z(),h=L(),b=i(1),N=c=>{b.value=c},B=M(()=>T.value.slice((b.value-1)*10,b.value*10)),v=i(""),y=i(""),k=i(""),w=i(""),C=i(""),T=M(()=>x.order.filter(c=>c.orderId.match(v.value)&&c.orderTime.match(y.value)&&c.staff.match(k.value)&&c.orderStatus.match(w.value)&&c.orderPayment.match(C.value))),$=()=>{v.value="",y.value="",k.value="",w.value="",C.value=""},j=c=>{E.confirm("請選擇當前的訂單狀態","修改訂單狀態",{confirmButtonText:"已完成",cancelButtonText:"已取消",type:"info"}).then(()=>{x.order.find(r=>r.orderId===c).orderStatus="已完成",D.success("訂單狀態已設定為已完成")}).catch(()=>{x.order.find(r=>r.orderId===c).orderStatus="已取消",D.success("訂單狀態已設定為已取消")})},F=c=>{E.confirm("是否要該筆刪除訂單?","警告",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then(()=>{x.order=x.order.filter(r=>r.orderId!=c),D.success("刪除成功")}).catch(()=>{D.error("取消操作")})};return(c,r)=>{const m=p("el-popover"),s=p("el-table-column"),P=p("el-tag"),V=p("el-table"),X=p("el-pagination");return u(),O("div",q,[e("div",A,[G,e("div",H,[t(m,{placement:"bottom",title:"輸入要查詢的訂單編號",width:200,trigger:"click"},{reference:o(()=>[K]),default:o(()=>[e("div",J,[f(e("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>v.value=l),class:"w-[180px] h-[30px] text-center border-2 border-solid border-black rounded-lg bg-red-300 text-black font-bold placeholder:italic placeholder:text-black",placeholder:"請輸入訂單編號"},null,512),[[_,v.value]])])]),_:1}),t(m,{placement:"bottom",title:"輸入要查詢的訂單時間",width:200,trigger:"click"},{reference:o(()=>[R]),default:o(()=>[e("div",Q,[f(e("input",{"onUpdate:modelValue":r[1]||(r[1]=l=>y.value=l),class:"w-[180px] h-[30px] text-center border-2 border-solid border-black rounded-lg bg-red-300 text-black font-bold placeholder:italic placeholder:text-black",placeholder:"請輸入訂單時間"},null,512),[[_,y.value]])])]),_:1}),t(m,{placement:"bottom",title:"輸入要查詢的服務人員",width:200,trigger:"click"},{reference:o(()=>[Y]),default:o(()=>[e("div",W,[f(e("input",{"onUpdate:modelValue":r[2]||(r[2]=l=>k.value=l),class:"w-[180px] h-[30px] text-center border-2 border-solid border-black rounded-lg bg-red-300 text-black font-bold placeholder:italic placeholder:text-black",placeholder:"請輸入服務人員"},null,512),[[_,k.value]])])]),_:1}),t(m,{placement:"bottom",title:"輸入要查詢的訂單狀態",width:200,trigger:"click"},{reference:o(()=>[ee]),default:o(()=>[e("div",Z,[f(e("input",{"onUpdate:modelValue":r[3]||(r[3]=l=>w.value=l),class:"w-[180px] h-[30px] text-center border-2 border-solid border-black rounded-lg bg-red-300 text-black font-bold placeholder:italic placeholder:text-black",placeholder:"請輸入訂單狀態"},null,512),[[_,w.value]])])]),_:1}),t(m,{placement:"bottom",title:"輸入要查詢的付款方式",width:200,trigger:"click"},{reference:o(()=>[le]),default:o(()=>[e("div",te,[f(e("input",{"onUpdate:modelValue":r[4]||(r[4]=l=>C.value=l),class:"w-[180px] h-[30px] text-center border-2 border-solid border-black rounded-lg bg-red-300 text-black font-bold placeholder:italic placeholder:text-black",placeholder:"請輸入付款方式"},null,512),[[_,C.value]])])]),_:1}),e("button",{onClick:$,class:"md:px-2 px-1 border-2 border-solid border-black text-center md:mx-3 mx-1 text-blue-800 bg-red-500 rounded-lg font-bold 2xl:text-2xl xl:text-xl lg:text-md sm:text-sm text-xs select-none active:bg-yellow-300"},"重置篩選")])]),e("div",oe,[t(V,{data:B.value,style:{width:"100%",height:"530px"},"empty-text":"目前無訂單"},{default:o(()=>[t(s,{width:"30",type:"expand"},{default:o(({row:l})=>[e("div",de,[e("div",re,[n(" 已買袋子數量: "),e("p",se,a(l.orderBagCount),1),n("個 ")]),e("div",ne,[n(" 飲料杯數: "),e("p",ae,a(l.orderCupCount),1),n("杯 ")]),e("div",ce,[n(" 訂單原始金額: $ "),e("p",xe,a(l.orderTotalPrice),1),n("元 ")]),e("div",ie,[n(" 已使用的優惠券: "),e("p",ue,a(l.discountName),1)]),e("div",be,[n(" 優惠券折扣金額: $ "),e("p",me,a(l.orderDiscount),1),n("元 ")]),e("div",pe,[n(" 顧客應付金額: $ "),e("p",ge,a(l.orderPaymentPrice),1),n("元 ")])]),t(V,{data:l.orderData,border:"",style:{width:"100%"}},{default:o(()=>[t(s,{align:"center",center:"",label:"序號",type:"index","min-width":"30"}),t(s,{align:"center",label:"商品","min-width":"80",prop:"name"}),t(s,{align:"center",label:"單價","min-width":"60"},{default:o(({row:d})=>[e("p",null,a(d.price)+" 元",1)]),_:2},1024),t(s,{align:"center",label:"加料",prop:"addList","min-width":"80"}),t(s,{align:"center",label:"配料金額","min-width":"60"},{default:o(({row:d})=>[e("p",null,a(d.addListPrice)+" 元",1)]),_:2},1024),t(s,{align:"center",label:"數量",prop:"count","min-width":"60"},{default:o(({row:d})=>[e("p",null,a(d.count)+" 杯",1)]),_:2},1024),t(s,{align:"center",label:"折扣金額","min-width":"60"},{default:o(({row:d})=>[e("p",null,a(d.discount)+" 元",1)]),_:2},1024),t(s,{align:"center",label:"使用的折扣","min-width":"80"},{default:o(({row:d})=>[d.useDiscountPercent===""&&d.useDiscountMoney===""&&d.useDiscountFree===""?(u(),O("div",fe,he)):(u(),O("div",ve,[d.useDiscountFree!=""?(u(),S(P,{key:0,class:"mx-0.5",type:"primary"},{default:o(()=>[n(a(d.useDiscountFree),1)]),_:2},1024)):I("",!0),d.useDiscountPercent!=""?(u(),S(P,{key:1,class:"mx-0.5",type:"danger"},{default:o(()=>[n(a(d.useDiscountPercent),1)]),_:2},1024)):I("",!0),d.useDiscountMoney!=""?(u(),S(P,{key:2,class:"mx-0.5",type:"warning"},{default:o(()=>[n(a(d.useDiscountMoney),1)]),_:2},1024)):I("",!0)]))]),_:2},1024),t(s,{align:"center",label:"小計","min-width":"60"},{default:o(({row:d})=>[e("p",null,a(d.totalPrice)+"元",1)]),_:2},1024)]),_:2},1032,["data"])]),_:1}),t(s,{align:"center",prop:"orderId",label:"訂單編號","min-width":"105"}),t(s,{align:"center",prop:"orderTime",label:"訂單時間","min-width":"160"}),t(s,{align:"center",prop:"staff",label:"服務人員","min-width":"130"}),t(s,{align:"center",prop:"orderStatus",label:"訂單狀態","min-width":"80"}),t(s,{align:"center",label:"訂單金額",width:"160"},{default:o(({row:l})=>[e("p",null,a(l.orderPaymentPrice)+" 元",1)]),_:1}),t(s,{align:"center",prop:"orderPayment",label:"付款方式","min-width":"90"}),t(s,{fixed:"right",align:"right",label:"操作","min-width":"235"},{default:o(({row:l})=>[e("div",ye,[e("button",{onClick:d=>j(l.orderId),class:U(["border-2 border-solid border-black rounded-lg text-blue-800 font-bold bg-red-400 xl:text-lg text-md mx-1 px-1 select-none active:bg-yellow-300",{"opacity-50":g(h).userInfo.canEditOrderStatus==="X","pointer-events-none":g(h).userInfo.canEditOrderStatus==="X"}])},"編輯訂單狀態",10,ke),e("button",{onClick:d=>F(l.orderId),class:U(["border-2 border-solid border-black rounded-lg text-blue-800 font-bold bg-red-400 xl:text-lg text-md mx-1 px-1 select-none active:bg-yellow-300",{"opacity-50":g(h).userInfo.canDeleteOrder==="X","pointer-events-none":g(h).userInfo.canDeleteOrder==="X"}])},"刪除訂單",10,we)])]),_:1})]),_:1},8,["data"]),e("div",Ce,[t(X,{"current-page":b.value,"onUpdate:currentPage":r[5]||(r[5]=l=>b.value=l),background:!0,layout:" prev, pager, next",total:g(x).order.length,onCurrentChange:N},null,8,["current-page","total"]),e("div",De,[n("總共有"),e("p",Pe,a(T.value.length),1),n("筆訂單，當前頁面有"),e("p",Oe,a(B.value.length),1),n("筆訂單 ")])])])])}}};export{Te as default};
